!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).OptimizelyTracker={})}(this,function(t){"use strict";var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},n(t,i)};function i(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}var e=function(){return e=Object.assign||function(t){for(var n,i=1,e=arguments.length;i<e;i++)for(var r in n=arguments[i])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},e.apply(this,arguments)};function r(t,n,i,e){return new(i||(i=Promise))(function(r,s){function o(t){try{c(e.next(t))}catch(t){s(t)}}function a(t){try{c(e.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof i?n:new i(function(t){t(n)})).then(o,a)}c((e=e.apply(t,n||[])).next())})}function s(t,n){var i,e,r,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(i=1,e&&(r=2&a[0]?e.return:a[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,a[1])).done)return r;switch(e=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,e=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(t,s)}catch(t){a=[6,t],e=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function o(t,n,i){if(i||2===arguments.length)for(var e,r=0,s=n.length;r<s;r++)!e&&r in n||(e||(e=Array.prototype.slice.call(n,0,r)),e[r]=n[r]);return t.concat(e||Array.prototype.slice.call(n))}function a(){return"v_"+u(16)}function c(){return"s_"+u(12)+"_"+Date.now()}function u(t){for(var n="",i=0;i<t;i++)n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return n}function h(){return Math.random().toString(36).substr(2,9)+Date.now().toString(36)}function f(){return Date.now()}function l(t,n){var i=!1;return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];i||(t.apply(this,e),i=!0,setTimeout(function(){return i=!1},n))}}function d(){return"undefined"!=typeof window&&"undefined"!=typeof document}function v(t,n){void 0===n&&(n=null);try{return JSON.parse(t)}catch(t){return n}}function m(t,n){void 0===n&&(n="{}");try{return JSON.stringify(t)}catch(t){return n}}function p(){return d()?window.location.href.split("#")[0].split("?")[0]:""}function g(){return d()&&document.title||""}function y(){return d()&&document.referrer||""}function w(){return d()?navigator.userAgent||"":"server"}function b(){if(!d())return"server";var t=w().toLowerCase();return/android/.test(t)?"android":/iphone|ipad|ipod/.test(t)?"ios":/windows/.test(t)?"windows":/mac/.test(t)?"mac":/linux/.test(t)?"linux":"unknown"}function k(){if(!d())return"unknown";var t=w().toLowerCase();return/chrome/.test(t)&&!/edge/.test(t)?"chrome":/firefox/.test(t)?"firefox":/safari/.test(t)&&!/chrome/.test(t)?"safari":/edge/.test(t)?"edge":/opera/.test(t)?"opera":"unknown"}function x(t){d()&&"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}function S(t,n){var i=e({},t);for(var r in n)n.hasOwnProperty(r)&&(n[r]&&"object"==typeof n[r]&&!Array.isArray(n[r])?i[r]=S(i[r]||{},n[r]):i[r]=n[r]);return i}function T(t){var n=t.split(".");return 4===n.length?"".concat(n[0],".").concat(n[1],".").concat(n[2],".0"):t}function j(t){var n=t.split(":");return n.length>=4?"".concat(n.slice(0,4).join(":"),"::"):t}function I(t,n){return t+24*n*60*60*1e3}"function"==typeof SuppressedError&&SuppressedError;var M=function(){function t(t){void 0===t&&(t={}),this.name="behavioral",this.t=null,this.i=!1,this.o=0,this.u=0,this.h=0,this.l=0,this.v=0,this.m=0,this.p=0,this.k=0,this.S=new Set,this.T=new Map,this.j=[],this.I=0,this.M=e({enableClickTracking:!0,enableScrollTracking:!0,enableFormTracking:!0,enableMouseTracking:!0,enableVisibilityTracking:!0,enablePerformanceTracking:!0,scrollThreshold:25,mouseSampleRate:100,clickSelector:'a, button, [role="button"], input[type="submit"], input[type="button"]',formSelector:"form, input, textarea, select",excludeSelectors:[".tracking-ignore",'[data-tracking="false"]'],maxScrollEvents:100,maxMouseEvents:500},t)}return t.prototype.init=function(){var t;d()&&(this.i=!0,this.o=f(),this.u=f(),this._(),this.C(),null===(t=this.t)||void 0===t||t.config.debug)},t.prototype.setTracker=function(t){this.t=t},t.prototype._=function(){this.M.enableClickTracking&&this.D(),this.M.enableScrollTracking&&this.A(),this.M.enableFormTracking&&this.P(),this.M.enableMouseTracking&&this.O(),this.M.enableVisibilityTracking&&this.R(),this.M.enablePerformanceTracking&&this.N(),this.G()},t.prototype.D=function(){var t=this,n=function(n){if(t.i&&t.t){var i=n.target;if(i&&!t.W(i)){if(!i.matches(t.M.clickSelector)){for(var e=i.parentElement,r=!1,s=0;s<3&&e;s++){if(e.matches(t.M.clickSelector)){r=!0;break}e=e.parentElement}if(!r)return}var o={element:t.q(i),tagName:i.tagName.toLowerCase(),className:i.className,id:i.id||"",text:t.V(i),x:n.clientX,y:n.clientY,timestamp:f()};t.J("click",o),t.m++,t.U(),t.t.config.debug}}};document.addEventListener("click",n,{passive:!0}),this.j.push(function(){return document.removeEventListener("click",n)})},t.prototype.A=function(){var t=this,n=0,i=l(function(){if(t.i&&t.t&&!(t.h>=t.M.maxScrollEvents)){var i=window.pageYOffset||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-window.innerHeight,r=Math.round(i/e*100);if(t.v=Math.max(t.v,r),Math.abs(r-Math.round(n/e*100))<t.M.scrollThreshold)n=i;else{var s=f(),o=i>n?"down":"up",a=Math.abs(i-n)/(s-t.I),c={depth:r,maxDepth:t.v,direction:o,speed:a,timestamp:s};t.J("scroll",c),t.h++,t.U(),n=i,t.I=s,t.t.config.debug}}},250);window.addEventListener("scroll",i,{passive:!0}),this.j.push(function(){return window.removeEventListener("scroll",i)})},t.prototype.P=function(){var t=this,n=function(n,i){var e;if(t.i&&t.t){var r=n.target;if(r&&!t.W(r)){var s=r.closest("form"),o={formId:(null==s?void 0:s.id)||"",formName:(null==s?void 0:s.getAttribute("name"))||"",field:t.q(r),fieldType:r.type||r.tagName.toLowerCase(),action:i,value:"change"===i?null===(e=r.value)||void 0===e?void 0:e.slice(0,50):void 0,timestamp:f()};t.J("form_interaction",o),t.p++,t.U(),t.t.config.debug}}};["focus","blur","change"].forEach(function(i){var e=function(t){return n(t,i)};document.addEventListener(i,e,{passive:!0}),t.j.push(function(){return document.removeEventListener(i,e)})});var i=function(t){return n(t,"submit")};document.addEventListener("submit",i,{passive:!0}),this.j.push(function(){return document.removeEventListener("submit",i)})},t.prototype.O=function(){var t=this,n=l(function(n){if(t.i&&t.t&&!(t.l>=t.M.maxMouseEvents)){var i=n.target,e={x:n.clientX,y:n.clientY,type:"move",element:i?t.q(i):"document",timestamp:f()};t.J("mouse_move",e),t.l++,t.k++,t.U()}},this.M.mouseSampleRate);document.addEventListener("mousemove",n,{passive:!0}),this.j.push(function(){return document.removeEventListener("mousemove",n)})},t.prototype.R=function(){var t=this;"IntersectionObserver"in window&&(this.F=new IntersectionObserver(function(n){n.forEach(function(n){var i,e=n.target,r=n.isIntersecting,s=f();if(r)t.T.set(e,s);else{var o=t.T.get(e);if(o){var a=s-o,c={element:t.q(e),visible:!1,duration:a,timestamp:s};t.J("element_visibility",c),t.T.delete(e),null===(i=t.t)||void 0===i||i.config.debug}}})},{threshold:[0,.25,.5,.75,1]}),document.querySelectorAll("[data-track-visibility], .cta, .product, .pricing").forEach(function(n){var i;null===(i=t.F)||void 0===i||i.observe(n),t.S.add(n)}))},t.prototype.N=function(){var t,n=this;if("PerformanceObserver"in window)try{this.B=new PerformanceObserver(function(t){t.getEntries().forEach(function(t){"largest-contentful-paint"===t.entryType?n.J("performance",{metric:"lcp",value:t.startTime,timestamp:f()}):"first-input"===t.entryType?n.J("performance",{metric:"fid",value:t.processingStart-t.startTime,timestamp:f()}):"layout-shift"===t.entryType&&n.J("performance",{metric:"cls",value:t.value,timestamp:f()})})}),this.B.observe({entryTypes:["largest-contentful-paint","first-input","layout-shift"]})}catch(n){null===(t=this.t)||void 0===t||t.config.debug}},t.prototype.G=function(){var t=this,n=function(){t.L&&clearTimeout(t.L),t.L=window.setTimeout(function(){t.J("user_idle",{duration:3e4,timestamp:f()})},3e4)};["mousedown","mousemove","keypress","scroll","touchstart"].forEach(function(i){document.addEventListener(i,n,{passive:!0}),t.j.push(function(){return document.removeEventListener(i,n)})}),n()},t.prototype.C=function(){var t=this;this.H=window.setInterval(function(){if(t.i&&t.t){var n=t.X();t.J("engagement_metrics",n),t.t.config.debug}},3e4)},t.prototype.X=function(){var t=f(),n=t-this.o,i=t-this.u,e=25*Math.min(this.v/100,1),r=25*Math.min(this.m/5,1),s=25*Math.min(this.p/3,1),o=25*Math.min(n/6e4,1),a=Math.round(e+r+s+o);return{timeOnPage:n,scrollDepth:this.v,clickCount:this.m,formInteractions:this.p,mouseMovements:this.k,idleTime:i,engagementScore:a}},t.prototype.J=function(t,n){if(this.t){var i={type:t,element:n.element||t,value:n.value||JSON.stringify(n),timestamp:n.timestamp||f(),sessionId:this.t.session.sessionId,visitorId:this.t.session.visitorId,metadata:n};this.t.track("behavioral:".concat(t),i)}},t.prototype.U=function(){this.u=f()},t.prototype.W=function(t){return this.M.excludeSelectors.some(function(n){return t.matches(n)})},t.prototype.q=function(t){if(!t)return"unknown";if(t.id)return"#".concat(t.id);if(t.className&&"string"==typeof t.className){var n=t.className.split(" ").filter(function(t){return t.length>0});if(n.length>0)return".".concat(n[0])}return t.tagName?t.tagName.toLowerCase():"unknown"},t.prototype.V=function(t){return(t.textContent||t.value||"").trim().slice(0,100)},t.prototype.enable=function(){this.i=!0},t.prototype.disable=function(){this.i=!1},t.prototype.destroy=function(){var t;this.i=!1,this.L&&clearTimeout(this.L),this.H&&clearInterval(this.H),this.F&&this.F.disconnect(),this.B&&this.B.disconnect(),this.j.forEach(function(t){return t()}),this.j=[],this.S.clear(),this.T.clear(),null===(t=this.t)||void 0===t||t.config.debug},t.prototype.getEngagementMetrics=function(){return this.X()},t.prototype.trackCustomEvent=function(t,n){this.J(t,n)},t}(),_=function(){function t(){this.name="TechnologyDetector",this.Y=!1,this.$=new Map,this.K=[],this.Z()}return t.prototype.init=function(){d()&&(this.Y=!0,this.tt())},t.prototype.enable=function(){this.Y=!0},t.prototype.disable=function(){this.Y=!1},t.prototype.destroy=function(){this.Y=!1,this.$.clear()},t.prototype.getCurrentTechStack=function(){return this.$.get(window.location.hostname)||this.tt()},t.prototype.redetect=function(){return this.$.delete(window.location.hostname),this.tt()},t.prototype.tt=function(){var t,n,i,e;if(!d()||!this.Y)return{};for(var r={analytics:[],libraries:[]},s=0,o=this.K;s<o.length;s++){var a=o[s];if(this.nt(a)>.5)switch(a.category){case"cms":r.cms=a.name;break;case"framework":r.framework=a.name;break;case"analytics":(null===(t=r.analytics)||void 0===t?void 0:t.includes(a.name))||null===(n=r.analytics)||void 0===n||n.push(a.name);break;case"library":(null===(i=r.libraries)||void 0===i?void 0:i.includes(a.name))||null===(e=r.libraries)||void 0===e||e.push(a.name);break;case"server":r.server=a.name;break;case"hosting":r.hosting=a.name}}return this.$.set(window.location.hostname,r),r},t.prototype.nt=function(t){var n=0,i=0,e=0;if(t.checks.dom){i+=t.checks.dom.length;for(var r=0,s=t.checks.dom;r<s.length;r++){var o=s[r];document.querySelector(o)&&e++}}if(t.checks.js){i+=t.checks.js.length;for(var a=0,c=t.checks.js;a<c.length;a++){var u=c[a];this.it(u)&&e++}}if(t.checks.meta){i+=t.checks.meta.length;for(var h=0,f=t.checks.meta;h<f.length;h++){var l=f[h];this.et(l)&&e++}}if(t.checks.text){i+=t.checks.text.length;for(var d=0,v=t.checks.text;d<v.length;d++){var m=v[d];document.documentElement.outerHTML.includes(m)&&e++}}if(t.checks.url){i+=t.checks.url.length;for(var p=0,g=t.checks.url;p<g.length;p++){var y=g[p];this.rt(y)&&e++}}if(t.checks.cookies){i+=t.checks.cookies.length;for(var w=0,b=t.checks.cookies;w<b.length;w++){var k=b[w];this.st(k)&&e++}}return i>0&&(n=e/i*t.confidence),n},t.prototype.it=function(t){try{for(var n=t.split("."),i=window,e=0,r=n;e<r.length;e++){var s=r[e];if(!i||"object"!=typeof i||!(s in i))return!1;i=i[s]}return void 0!==i}catch(t){return!1}},t.prototype.et=function(t){for(var n=0,i=Array.from(document.querySelectorAll("meta"));n<i.length;n++){var e=i[n],r=e.getAttribute("name")||e.getAttribute("property")||"",s=e.getAttribute("content")||"";if(r.includes(t)||s.includes(t))return!0}return!1},t.prototype.rt=function(t){for(var n=0,i=Array.from(document.querySelectorAll("script[src]"));n<i.length;n++)if((i[n].getAttribute("src")||"").includes(t))return!0;for(var e=0,r=Array.from(document.querySelectorAll("link[href]"));e<r.length;e++)if((r[e].getAttribute("href")||"").includes(t))return!0;return!1},t.prototype.st=function(t){return document.cookie.includes(t)},t.prototype.Z=function(){this.K=[{name:"WordPress",category:"cms",confidence:1,checks:{meta:["generator"],text:["wp-content","wp-includes"],js:["wp"]}},{name:"Shopify",category:"cms",confidence:1,checks:{js:["Shopify"],text:["shopify"],meta:["shopify"]}},{name:"Drupal",category:"cms",confidence:1,checks:{meta:["generator"],text:["/sites/default/","Drupal.settings"],js:["Drupal"]}},{name:"Squarespace",category:"cms",confidence:1,checks:{text:["squarespace"],url:["squarespace"]}},{name:"Webflow",category:"cms",confidence:1,checks:{text:["webflow"],url:["webflow"]}},{name:"React",category:"framework",confidence:.9,checks:{js:["React","ReactDOM"],text:["react","data-reactroot"]}},{name:"Vue.js",category:"framework",confidence:.9,checks:{js:["Vue"],text:["vue"]}},{name:"Angular",category:"framework",confidence:.9,checks:{js:["ng","angular"],text:["ng-app","ng-controller"]}},{name:"Next.js",category:"framework",confidence:1,checks:{js:["__NEXT_DATA__"],text:["_next/static"]}},{name:"Nuxt.js",category:"framework",confidence:1,checks:{js:["__NUXT__"],text:["_nuxt/"]}},{name:"Svelte",category:"framework",confidence:.9,checks:{text:["svelte"]}},{name:"Google Analytics",category:"analytics",confidence:1,checks:{js:["gtag","ga","GoogleAnalyticsObject"],url:["google-analytics.com","googletagmanager.com"]}},{name:"Google Tag Manager",category:"analytics",confidence:1,checks:{js:["dataLayer"],url:["googletagmanager.com"]}},{name:"Mixpanel",category:"analytics",confidence:1,checks:{js:["mixpanel"],url:["mixpanel.com"]}},{name:"Amplitude",category:"analytics",confidence:1,checks:{js:["amplitude"],url:["amplitude.com"]}},{name:"Segment",category:"analytics",confidence:1,checks:{js:["analytics"],url:["segment.com","segment.io"]}},{name:"Adobe Analytics",category:"analytics",confidence:1,checks:{js:["s_account","_satellite"],url:["omtrdc.net","demdex.net"]}},{name:"Hotjar",category:"analytics",confidence:1,checks:{js:["hj"],url:["hotjar.com"]}},{name:"Facebook Pixel",category:"analytics",confidence:1,checks:{js:["fbq"],url:["facebook.net"]}},{name:"jQuery",category:"library",confidence:1,checks:{js:["jQuery","$"]}},{name:"Lodash",category:"library",confidence:1,checks:{js:["_"]}},{name:"D3.js",category:"library",confidence:1,checks:{js:["d3"]}},{name:"Chart.js",category:"library",confidence:1,checks:{js:["Chart"]}},{name:"Bootstrap",category:"library",confidence:.8,checks:{dom:[".container",".row",".col"],text:["bootstrap"]}},{name:"Tailwind CSS",category:"library",confidence:.8,checks:{dom:['[class*="tw-"]','[class*="bg-"]','[class*="text-"]'],text:["tailwind"]}},{name:"WooCommerce",category:"ecommerce",confidence:1,checks:{text:["woocommerce","wc-"],dom:[".woocommerce"]}},{name:"Magento",category:"ecommerce",confidence:1,checks:{text:["magento","Mage."],js:["Mage"]}},{name:"Cloudflare",category:"hosting",confidence:.7,checks:{text:["cloudflare"],url:["cloudflare"]}},{name:"AWS CloudFront",category:"hosting",confidence:.7,checks:{url:["cloudfront.net"]}},{name:"Netlify",category:"hosting",confidence:1,checks:{text:["netlify"],url:["netlify"]}},{name:"Vercel",category:"hosting",confidence:1,checks:{text:["vercel"],url:["vercel"]}}]},t}(),C=function(){function t(){this.ot=new Map}return t.prototype.on=function(t,n){this.ot.has(t)||this.ot.set(t,[]),this.ot.get(t).push(n)},t.prototype.off=function(t,n){var i=this.ot.get(t);if(i){var e=i.indexOf(n);e>-1&&i.splice(e,1),0===i.length&&this.ot.delete(t)}},t.prototype.emit=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var e=this.ot.get(t);e&&o([],e,!0).forEach(function(t){try{t.apply(void 0,n)}catch(t){process.env.NODE_ENV}})},t.prototype.once=function(t,n){var i=this,e=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];n.apply(void 0,r),i.off(t,e)};this.on(t,e)},t.prototype.removeAllListeners=function(t){t?this.ot.delete(t):this.ot.clear()},t.prototype.listenerCount=function(t){var n=this.ot.get(t);return n?n.length:0},t.prototype.eventNames=function(){return Array.from(this.ot.keys())},t}(),D=function(t){function n(n){void 0===n&&(n={});var i=t.call(this)||this;return i.name="WebSocketManager",i.ct=null,i.ut=[],i.ht=null,i.ft=null,i.lt=null,i.dt=null,i.vt=null,i.gt=0,i.yt=!1,i.wt=new Map,i.M={url:n.url||"",protocols:n.protocols||[],reconnect:!1!==n.reconnect,reconnectInterval:n.reconnectInterval||5e3,maxReconnectAttempts:n.maxReconnectAttempts||10,heartbeatInterval:n.heartbeatInterval||3e4,messageQueueSize:n.messageQueueSize||1e3,enableCompression:!1!==n.enableCompression,enableFallback:!1!==n.enableFallback,fallbackUrl:n.fallbackUrl||"",timeout:n.timeout||1e4,debug:n.debug||!1},i.bt={status:"disconnected",url:i.M.url,reconnectAttempts:0},i.kt={messagesSet:0,messagesReceived:0,reconnections:0,errors:0,averageLatency:0,uptime:0,lastActivity:0},i.xt={interval:i.M.heartbeatInterval,timeout:5e3,maxMissed:3,enabled:!0},i.M.enableFallback&&i.M.fallbackUrl&&(i.ht={type:"http",url:i.M.fallbackUrl,enabled:!0,retryInterval:1e4}),i}return i(n,t),n.prototype.init=function(){d()?(this.St(),this.M.debug):this.M.debug},n.prototype.setSessionContext=function(t,n){this.Tt=t,this.jt=n},n.prototype.connect=function(t){return r(this,void 0,void 0,function(){var n,i,r=this;return s(this,function(s){if(this.yt)throw new Error("WebSocketManager has been destroyed");if(!(n=t||this.M.url))throw new Error("WebSocket URL is required");return(null===(i=this.ct)||void 0===i?void 0:i.readyState)===WebSocket.OPEN&&this.bt.url===n?[2]:(this.ct&&this.It(),[2,new Promise(function(t,i){try{r.bt=e(e({},r.bt),{status:"connecting",url:n}),delete r.bt.lastError,r.ct=new WebSocket(n,r.M.protocols),r.ct.binaryType="arraybuffer",r.ct.onopen=function(n){r.Mt(n),t()},r.ct.onclose=function(t){r._t(t)},r.ct.onerror=function(t){r.Ct(t),i(new Error("WebSocket connection failed"))},r.ct.onmessage=function(t){r.Dt(t)},setTimeout(function(){var t;(null===(t=r.ct)||void 0===t?void 0:t.readyState)===WebSocket.CONNECTING&&(r.ct.close(),i(new Error("WebSocket connection timeout")))},r.M.timeout)}catch(t){r.bt.status="error",r.bt.lastError=t,i(t)}})])})})},n.prototype.disconnect=function(){this.ct&&this.ct.close(1e3,"Normal closure"),this.It(),this.bt.status="disconnected"},n.prototype.reconnect=function(){return r(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:if(this.bt.reconnectAttempts>=this.M.maxReconnectAttempts){if(this.M.debug,this.M.enableFallback&&this.ht)return this.At("Max reconnection attempts reached"),[2];throw new Error("Max reconnection attempts reached")}this.bt.status="reconnecting",this.bt.reconnectAttempts++,this.kt.reconnections++,this.emit("connection:reconnecting",this.bt),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connect()];case 2:return n.sent(),this.bt.reconnectAttempts=0,this.emit("connection:reconnected",this.bt),[3,4];case 3:throw t=n.sent(),this.M.debug,this.Pt(),t;case 4:return[2]}})})},n.prototype.send=function(t){return r(this,void 0,void 0,function(){var n;return s(this,function(i){if(n=e(e({},t),{id:h(),timestamp:f(),sessionId:this.Tt||"unknown",visitorId:this.jt||"unknown"}),!this.isConnected)return this.Ot(n),[2,!1];try{return this.ct.send(JSON.stringify(n)),this.kt.messagesSet++,this.kt.lastActivity=f(),this.emit("message:sent",n),[2,!0]}catch(t){return this.M.debug,this.Ot(n),this.emit("message:failed",{message:n,error:t}),[2,!1]}return[2]})})},n.prototype.sendEvent=function(t,n){return r(this,arguments,void 0,function(t,n,i){return void 0===i&&(i="normal"),s(this,function(r){return[2,this.send({type:"event",data:e({event:t},n),priority:i,retry:"low"!==i})]})})},n.prototype.sendHeartbeat=function(){if(this.isConnected){var t=h(),n=f();this.wt.set(t,n),this.send({type:"heartbeat",data:{pingId:t,timestamp:n},priority:"critical",retry:!1}),this.gt=0,this.emit("heartbeat:sent",{timestamp:n})}},n.prototype.getConnectionState=function(){return e({},this.bt)},n.prototype.getMetrics=function(){var t=this.bt.connectedAt?f()-this.bt.connectedAt:0;return e(e({},this.kt),{uptime:t})},n.prototype.clearQueue=function(){this.ut=[]},Object.defineProperty(n.prototype,"isConnected",{get:function(){var t;return(null===(t=this.ct)||void 0===t?void 0:t.readyState)===WebSocket.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){return this.bt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metrics",{get:function(){return this.getMetrics()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"queueSize",{get:function(){return this.ut.length},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){this.yt=!0,this.disconnect(),this.Rt(),this.clearQueue(),this.removeAllListeners(),this.M.debug},n.prototype.Mt=function(t){this.bt=e(e({},this.bt),{status:"connected",connectedAt:f()}),delete this.bt.disconnectedAt,delete this.bt.lastError,this.xt.enabled&&this.zt(),this.Nt(),this.emit("connection:open",this.bt),this.M.debug},n.prototype._t=function(t){var n="connected"===this.bt.status;this.bt=e(e({},this.bt),{status:"disconnected",disconnectedAt:f()}),this.It(),this.emit("connection:close",this.bt),this.M.debug,this.M.reconnect&&n&&!this.yt&&this.Pt()},n.prototype.Ct=function(t){var n=new Error(t.message||"WebSocket error");this.bt.lastError=n,this.bt.status="error",this.kt.errors++,this.emit("connection:error",{error:n,state:this.bt}),this.M.debug},n.prototype.Dt=function(t){var n;try{var i=JSON.parse(t.data);if(this.kt.messagesReceived++,this.kt.lastActivity=f(),"heartbeat"===i.type&&(null===(n=i.data)||void 0===n?void 0:n.pingId))return void this.Et(i);if("ack"===i.type)return void this.Gt(i);this.emit("message:received",i),this.M.debug}catch(t){this.M.debug}},n.prototype.Et=function(t){var n=t.data,i=n.pingId,e=n.timestamp;if(this.wt.has(i)){var r=this.wt.get(i),s=f()-r;this.bt.latency=s,this.kt.averageLatency=(this.kt.averageLatency+s)/2,this.wt.delete(i),this.gt=0,this.emit("heartbeat:received",{timestamp:e,latency:s})}},n.prototype.Gt=function(t){var n,i=null===(n=t.data)||void 0===n?void 0:n.messageId;i&&(this.ut=this.ut.filter(function(t){return t.id!==i}))},n.prototype.Ot=function(t){if(this.ut.length>=this.M.messageQueueSize){var n=this.ut.shift();this.emit("queue:full",{size:this.ut.length,dropped:n})}var i=e(e({},t),{attempts:0,nextRetry:f(),maxRetries:"critical"===t.priority?5:3});this.ut.push(i),this.emit("message:queued",t)},n.prototype.Nt=function(){if(this.isConnected&&0!==this.ut.length)for(var t=this.ut.filter(function(t){return t.nextRetry<=f()&&t.attempts<t.maxRetries}),n=function(t){try{i.ct.send(JSON.stringify(t)),i.ut=i.ut.filter(function(n){return n.id!==t.id}),i.kt.messagesSet++,i.emit("message:sent",t)}catch(n){t.attempts++,t.nextRetry=f()+1e3*t.attempts,t.attempts>=t.maxRetries&&(i.ut=i.ut.filter(function(n){return n.id!==t.id}),i.emit("message:failed",{message:t,error:n}))}},i=this,e=0,r=t;e<r.length;e++)n(r[e])},n.prototype.St=function(){var t=this;this.vt&&clearInterval(this.vt),this.vt=window.setInterval(function(){t.Nt()},1e3)},n.prototype.zt=function(){var t=this;this.ft&&clearInterval(this.ft),this.ft=window.setInterval(function(){t.isConnected&&(t.sendHeartbeat(),t.lt=window.setTimeout(function(){t.gt++,t.gt>=t.xt.maxMissed&&(t.M.debug,t.reconnect().catch(function(){}))},t.xt.timeout))},this.xt.interval)},n.prototype.Pt=function(){var t=this;this.dt&&clearTimeout(this.dt);var n=this.M.reconnectInterval*Math.pow(1.5,this.bt.reconnectAttempts);this.dt=window.setTimeout(function(){t.yt||"connected"===t.bt.status||t.reconnect().catch(function(){})},n)},n.prototype.At=function(t){this.ht&&(this.emit("fallback:activated",{reason:t,url:this.ht.url}),this.M.debug)},n.prototype.It=function(){this.Rt(),this.wt.clear(),this.gt=0},n.prototype.Rt=function(){this.ft&&(clearInterval(this.ft),this.ft=null),this.lt&&(clearTimeout(this.lt),this.lt=null),this.dt&&(clearTimeout(this.dt),this.dt=null),this.vt&&(clearInterval(this.vt),this.vt=null)},n}(C),A=function(){function t(t,n){void 0===n&&(n={}),this.Wt=null,this.qt=null,this.j=new Map,this.yt=!1,this.SESSION_KEY="session",this.VISITOR_KEY="visitor",this.FINGERPRINT_KEY="fingerprint",this.TABS_KEY="active_tabs",this.HEARTBEAT_KEY="heartbeat",this.Vt=t,this.Jt=e({sessionTimeout:18e5,enableCrossTabs:!0,enableFingerprinting:!0,fingerprintElements:{screen:!0,timezone:!0,language:!0,platform:!0,plugins:!0,canvas:!1},sessionValidation:!0,storagePrefix:"opt_session_"},n),this.Ut=this.Ft(),this.Jt.enableFingerprinting&&this.Bt(),this.Jt.enableCrossTabs&&d()&&(this.Lt(),this.zt())}return t.prototype.initializeSession=function(){return r(this,void 0,void 0,function(){var t,n,i;return s(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,this.Ht()];case 1:return(t=e.sent())?(this.Wt=t,this.Qt("session:restored",t),[2,t]):[4,this.Xt()];case 2:return n=e.sent(),this.Wt=n,this.Yt(n),this.Qt("session:created",n),[2,n];case 3:return e.sent(),i=this.$t(),this.Wt=i,[2,i];case 4:return[2]}})})},t.prototype.getCurrentSession=function(){return this.Wt},t.prototype.updateActivity=function(){this.Wt&&(this.Wt.lastActivity=f(),this.Wt.pageViews++,this.Yt(this.Wt))},t.prototype.validateSession=function(){return r(this,void 0,void 0,function(){var t,n,i,e;return s(this,function(r){switch(r.label){case 0:return this.Wt?(t=[],n=!0,f()-this.Wt.lastActivity>this.Jt.sessionTimeout&&(n=!1,t.push("Session timeout exceeded")),this.Jt.enableFingerprinting&&this.Jt.sessionValidation?[4,this.Bt()]:[3,2]):[2,{isValid:!1,reasons:["No active session"],fingerprint:this.qt,lastValidated:f()}];case 1:i=r.sent(),(e=this.Kt())&&i.hash!==e.hash&&this.Zt(i,e)&&(n=!1,t.push("Session fingerprint validation failed")),r.label=2;case 2:return[2,{isValid:n,reasons:t,fingerprint:this.qt,lastValidated:f()}]}})})},t.prototype.invalidateSession=function(){this.Wt&&(this.Qt("session:invalid",this.Wt),this.Wt=null,this.Vt.remove(this.SESSION_KEY))},t.prototype.getFingerprint=function(){return this.qt},t.prototype.on=function(t,n){this.j.has(t)||this.j.set(t,[]),this.j.get(t).push(n)},t.prototype.off=function(t,n){var i=this.j.get(t);if(i){var e=i.indexOf(n);e>-1&&i.splice(e,1)}},t.prototype.destroy=function(){if(!this.yt){this.tn&&clearInterval(this.tn),this.nn&&clearInterval(this.nn);try{this.en()}catch(t){}this.j.clear(),this.yt=!0}},t.prototype.Ht=function(){return r(this,void 0,void 0,function(){var t,n;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),(t=this.Vt.get(this.SESSION_KEY))&&(n=v(t,null))?[4,this.rn(n)]:[2,null];case 1:return i.sent().isValid?[2,n]:(this.Vt.remove(this.SESSION_KEY),[2,null]);case 2:return i.sent(),[2,null];case 3:return[2]}})})},t.prototype.Xt=function(){return r(this,void 0,void 0,function(){var t,n;return s(this,function(i){try{t=this.Vt.get(this.VISITOR_KEY)||a(),this.Vt.set(this.VISITOR_KEY,t)}catch(n){t=a()}n={sessionId:c(),visitorId:t,startTime:f(),lastActivity:f(),pageViews:0,platform:b(),userAgent:w(),referrer:y(),landingPage:p()};try{this.sn()}catch(t){}return[2,n]})})},t.prototype.$t=function(){return{sessionId:c(),visitorId:a(),startTime:f(),lastActivity:f(),pageViews:0,platform:b(),userAgent:w(),referrer:y(),landingPage:p()}},t.prototype.Yt=function(t){try{this.Vt.set(this.SESSION_KEY,m(t))}catch(t){this.Jt.debug}},t.prototype.Bt=function(){return r(this,void 0,void 0,function(){var t,n,i,e;return s(this,function(r){switch(r.label){case 0:return d()?(t=this.Jt.fingerprintElements,n={},t.screen&&(n.screenResolution="".concat(screen.width,"x").concat(screen.height)),t.timezone&&(n.timezone=(new Date).getTimezoneOffset()),t.language&&(n.language=navigator.language||"unknown"),t.platform&&(n.platform=b(),n.browser=k()),t.plugins&&(n.pluginsHash=this.an()),t.canvas?(i=n,[4,this.cn()]):[3,2]):(this.qt={screenResolution:"unknown",timezone:0,language:"unknown",platform:"server",browser:"unknown",pluginsHash:"unknown",hash:"server-side"},[2,this.qt]);case 1:i.canvasHash=r.sent(),r.label=2;case 2:return e=Object.values(n).join("|"),n.hash=this.un(e).toString(),this.qt=n,this.Vt.set(this.FINGERPRINT_KEY,m(this.qt)),[2,this.qt]}})})},t.prototype.Kt=function(){var t=this.Vt.get(this.FINGERPRINT_KEY);return t?v(t,null):null},t.prototype.Zt=function(t,n){return t.platform!==n.platform||t.browser!==n.browser||t.screenResolution!==n.screenResolution},t.prototype.rn=function(t){return r(this,void 0,void 0,function(){var n,i,e;return s(this,function(r){return n=f()-t.lastActivity,i=[],e=!0,n>this.Jt.sessionTimeout&&(e=!1,i.push("Session expired")),[2,{isValid:e,reasons:i,fingerprint:this.qt,lastValidated:f()}]})})},t.prototype.Lt=function(){var t=this;d()&&(window.addEventListener("storage",function(n){n.key===t.hn(t.SESSION_KEY)&&t.fn(n.newValue)}),this.tn=window.setInterval(function(){t.ln()},5e3))},t.prototype.zt=function(){var t=this;d()&&(this.nn=window.setInterval(function(){t.dn(),t.vn()},1e4))},t.prototype.fn=function(t){var n;if(t){var i=v(t,null);i&&i.sessionId!==(null===(n=this.Wt)||void 0===n?void 0:n.sessionId)&&(this.Wt=i,this.Qt("session:synchronized",i))}},t.prototype.ln=function(){var t=this.mn(),n=f(),i=t[this.Ut];(!i||n-i.lastHeartbeat>3e4)&&this.sn()},t.prototype.dn=function(){var t,n={tabId:this.Ut,timestamp:f(),sessionId:(null===(t=this.Wt)||void 0===t?void 0:t.sessionId)||"unknown"};this.Vt.set(this.HEARTBEAT_KEY,m(n))},t.prototype.mn=function(){try{var t=this.Vt.get(this.TABS_KEY);return t?v(t,{}):{}}catch(t){return{}}},t.prototype.sn=function(){var t;try{var n=this.mn();n[this.Ut]={startTime:f(),lastHeartbeat:f(),sessionId:(null===(t=this.Wt)||void 0===t?void 0:t.sessionId)||"pending"},this.Vt.set(this.TABS_KEY,m(n))}catch(t){}},t.prototype.en=function(){try{var t=this.mn();delete t[this.Ut],this.Vt.set(this.TABS_KEY,m(t))}catch(t){}},t.prototype.vn=function(){for(var t=this.mn(),n=f(),i=!1,e=0,r=Object.entries(t);e<r.length;e++){var s=r[e],o=s[0];n-s[1].lastHeartbeat>6e4&&(delete t[o],i=!0)}i&&this.Vt.set(this.TABS_KEY,m(t))},t.prototype.Ft=function(){return"tab_"+Math.random().toString(36).substr(2,9)+"_"+f()},t.prototype.hn=function(t){return this.Jt.storagePrefix+t},t.prototype.an=function(){if(!d()||!navigator.plugins)return"unknown";var t=Array.from(navigator.plugins).map(function(t){return t.name}).sort().join("|");return this.un(t).toString()},t.prototype.cn=function(){return r(this,void 0,void 0,function(){var t,n;return s(this,function(i){if(!d())return[2,"unknown"];try{return t=document.createElement("canvas"),(n=t.getContext("2d"))?(n.textBaseline="top",n.font="14px Arial",n.fillText("Fingerprint test 🎨",2,2),[2,this.un(t.toDataURL()).toString()]):[2,"unknown"]}catch(t){return[2,"canvas-blocked"]}return[2]})})},t.prototype.un=function(t){for(var n=0,i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n&=n;return Math.abs(n)},t.prototype.Qt=function(t,n){var i={type:t,session:n,timestamp:f(),tabId:this.Ut};(this.j.get(t)||[]).forEach(function(t){try{t(i)}catch(t){}})},t}(),P=function(){function t(t){void 0===t&&(t="opt_"),this.pn=new Map,this.gn=t}return t.prototype.get=function(t){var n=this.gn+t;try{if(d()&&window.localStorage&&null!==(i=localStorage.getItem(n))){if((e=v(i,null))&&this.yn(e.expiry))return e.value;e&&localStorage.removeItem(n)}}catch(t){}try{var i,e;if(d()&&window.sessionStorage&&null!==(i=sessionStorage.getItem(n))&&(e=v(i,null))&&this.yn(e.expiry))return e.value}catch(t){}try{if(d()){var r=this.wn(n);if(r)return r}}catch(t){}return this.pn.get(n)||null},t.prototype.set=function(t,n,i){var e=this,r=this.gn+t,s=m({value:n,expiry:i});try{if(d()&&window.localStorage)return void localStorage.setItem(r,s)}catch(t){}try{if(d()&&window.sessionStorage)return void sessionStorage.setItem(r,s)}catch(t){}try{if(d()&&n.length<4e3)return void this.bn(r,n,i)}catch(t){}this.pn.set(r,n),this.pn.size>100&&Array.from(this.pn.entries()).slice(0,20).forEach(function(t){var n=t[0];return e.pn.delete(n)})},t.prototype.remove=function(t){var n=this.gn+t;try{d()&&window.localStorage&&localStorage.removeItem(n)}catch(t){}try{d()&&window.sessionStorage&&sessionStorage.removeItem(n)}catch(t){}try{d()&&this.kn(n)}catch(t){}this.pn.delete(n)},t.prototype.clear=function(){var t=this;this.xn().forEach(function(n){return t.remove(n.replace(t.gn,""))}),this.pn.clear()},t.prototype.yn=function(t){return!t||Date.now()<t},t.prototype.xn=function(){var t=this,n=[];try{if(d()&&window.localStorage)for(var i=0;i<localStorage.length;i++)(e=localStorage.key(i))&&e.startsWith(this.gn)&&n.push(e)}catch(t){}try{if(d()&&window.sessionStorage)for(i=0;i<sessionStorage.length;i++){var e;(e=sessionStorage.key(i))&&e.startsWith(this.gn)&&n.push(e)}}catch(t){}return this.pn.forEach(function(i,e){e.startsWith(t.gn)&&n.push(e)}),Array.from(new Set(n))},t.prototype.wn=function(t){var n;if(!d())return null;var i="; ".concat(document.cookie).split("; ".concat(t,"="));if(2===i.length){var e=null===(n=i.pop())||void 0===n?void 0:n.split(";").shift();return e?decodeURIComponent(e):null}return null},t.prototype.bn=function(t,n,i){if(d()){var e="".concat(t,"=").concat(encodeURIComponent(n),"; path=/");if(i){var r=new Date(i);e+="; expires=".concat(r.toUTCString())}"https:"===location.protocol&&(e+="; secure"),e+="; samesite=lax",document.cookie=e}},t.prototype.kn=function(t){d()&&(document.cookie="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"))},t}(),O=function(t){function n(){var n=t.call(this)||this;return n.isInitialized=!1,n.Sn=new Map,n.Tn=[],n.yt=!1,n.Vt=new P,n.jn=new A(n.Vt),n.config={apiUrl:"",projectId:"",debug:!1,enableGDPR:!0,sessionTimeout:18e5,batchSize:10,flushInterval:5e3,platform:"auto"},n.session=n.In(),n}return i(n,t),n.prototype.init=function(t){return r(this,void 0,void 0,function(){var n,i,e,r,o,a,c,u,h=this;return s(this,function(s){switch(s.label){case 0:if(this.isInitialized)return this.config.debug,[2];if(this.config=S(this.config,t),!this.config.apiUrl||!this.config.projectId)throw new Error("apiUrl and projectId are required");return this.Vt=new P("opt_".concat(this.config.projectId,"_")),n={sessionTimeout:this.config.sessionTimeout||18e5,enableCrossTabs:!0,enableFingerprinting:!0,sessionValidation:!0,storagePrefix:"opt_".concat(this.config.projectId,"_session_")},this.jn=new A(this.Vt,n),this.jn.on("session:created",function(t){h.session=t.session,h.emit("session:created",t),h.config.debug}),this.jn.on("session:restored",function(t){h.session=t.session,h.emit("session:restored",t),h.config.debug}),this.jn.on("session:synchronized",function(t){h.session=t.session,h.emit("session:synchronized",t),h.config.debug}),this.jn.on("session:invalid",function(t){h.emit("session:invalid",t),h.config.debug}),i=this,[4,this.jn.initializeSession()];case 1:if(i.session=s.sent(),(e=new M({enableClickTracking:!0,enableScrollTracking:!0,enableFormTracking:!0,enableMouseTracking:!!this.config.debug,enableVisibilityTracking:!0,enablePerformanceTracking:!0})).setTracker(this),this.use(e),r=new _,this.use(r),!(null===(u=this.config.websocket)||void 0===u?void 0:u.enabled)||!d())return[3,5];if(o=this.config.websocket,a={url:o.url||""},void 0!==this.config.debug&&(a.debug=this.config.debug),o.protocols&&(a.protocols=o.protocols),void 0!==o.reconnect&&(a.reconnect=o.reconnect),o.reconnectInterval&&(a.reconnectInterval=o.reconnectInterval),o.maxReconnectAttempts&&(a.maxReconnectAttempts=o.maxReconnectAttempts),o.heartbeatInterval&&(a.heartbeatInterval=o.heartbeatInterval),o.messageQueueSize&&(a.messageQueueSize=o.messageQueueSize),void 0!==o.enableCompression&&(a.enableCompression=o.enableCompression),void 0!==o.enableFallback&&(a.enableFallback=o.enableFallback),o.fallbackUrl&&(a.fallbackUrl=o.fallbackUrl),o.timeout&&(a.timeout=o.timeout),(c=new D(a)).setSessionContext(this.session.sessionId,this.session.visitorId),this.use(c),!o.autoConnect||!o.url)return[3,5];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,c.connect()];case 3:case 4:return s.sent(),this.config.debug,[3,5];case 5:return this.Mn(),d()&&x(function(){h.pageView()}),this.isInitialized=!0,this.emit("initialized",this.config),this.config.debug,[2]}})})},n.prototype.track=function(t,n){if(void 0===n&&(n={}),this.isInitialized)if(this.hasConsent()){var i={type:"custom",element:t,value:n,timestamp:f(),sessionId:this.session.sessionId,visitorId:this.session.visitorId,metadata:n};this._n(i),this.emit("track",i),this.config.debug}else this.config.debug;else this.config.debug},n.prototype.identify=function(t,n){void 0===n&&(n={}),this.isInitialized&&(this.session.visitorId=t,this.track("identify",{visitorId:t,traits:n}),this.emit("identify",{visitorId:t,traits:n}))},n.prototype.pageView=function(t){if(void 0===t&&(t={}),this.isInitialized&&this.hasConsent()){var n=this.getTechnologyStack(),i=e({url:p(),title:g(),timestamp:f(),sessionId:this.session.sessionId,visitorId:this.session.visitorId,referrer:y()},t);this.jn.updateActivity(),this.session=this.jn.getCurrentSession()||this.session,this._n({type:"pageview",element:i.url,value:i.title,timestamp:i.timestamp,sessionId:i.sessionId,visitorId:i.visitorId,metadata:e(e({},i),{techStack:n})}),this.emit("pageview",e(e({},i),{techStack:n})),this.config.debug}},n.prototype.use=function(t){this.Sn.has(t.name)?this.config.debug:(this.Sn.set(t.name,t),this.isInitialized&&t.init(),this.emit("module:added",t))},n.prototype.getModule=function(t){return this.Sn.get(t)||null},n.prototype.getTechnologyStack=function(){var t=this.getModule("TechnologyDetector");return t?t.getCurrentTechStack():{}},n.prototype.connectWebSocket=function(){return r(this,void 0,void 0,function(){var t;return s(this,function(n){if(!(t=this.getModule("WebSocketManager")))throw new Error("WebSocket module not initialized");return[2,t.connect()]})})},n.prototype.disconnectWebSocket=function(){var t=this.getModule("WebSocketManager");t&&t.disconnect()},n.prototype.sendWebSocketEvent=function(t,n){return r(this,arguments,void 0,function(t,n,i){var e;return void 0===i&&(i="normal"),s(this,function(r){return(e=this.getModule("WebSocketManager"))?[2,e.sendEvent(t,n,i)]:[2,!1]})})},n.prototype.getWebSocketState=function(){var t=this.getModule("WebSocketManager");return t?t.getConnectionState():null},n.prototype.getWebSocketMetrics=function(){var t=this.getModule("WebSocketManager");return t?t.getMetrics():null},n.prototype.setConsent=function(t){this.Vt.set("consent",JSON.stringify(t)),this.emit("consent:changed",t),this.config.debug},n.prototype.hasConsent=function(){if(!this.config.enableGDPR)return!0;var t=this.Vt.get("consent");if(!t)return!1;try{var n=JSON.parse(t);return n.hasConsent&&n.purposes.analytics}catch(t){return!1}},n.prototype.showConsentBanner=function(){var t=this.getModule("GDPRCompliance");t?t.showConsentBanner():this.config.debug},n.prototype.hideConsentBanner=function(){var t=this.getModule("GDPRCompliance");t?t.hideConsentBanner():this.config.debug},n.prototype.getGDPRConsent=function(){var t=this.getModule("GDPRCompliance");return t?t.getConsent():null},n.prototype.setGDPRConsent=function(t){var n=this.getModule("GDPRCompliance");n?n.setConsent(t):this.config.debug},n.prototype.withdrawConsent=function(t){var n=this.getModule("GDPRCompliance");n?n.withdrawConsent(t):this.config.debug},n.prototype.requestDataAccess=function(t){return r(this,void 0,void 0,function(){var n;return s(this,function(i){if(n=this.getModule("GDPRCompliance"))return[2,n.requestDataAccess(t)];throw new Error("GDPR Compliance module not found")})})},n.prototype.requestDataDeletion=function(t){return r(this,void 0,void 0,function(){var n;return s(this,function(i){if(n=this.getModule("GDPRCompliance"))return[2,n.requestDataDeletion(t)];throw new Error("GDPR Compliance module not found")})})},n.prototype.requestDataPortability=function(t){return r(this,void 0,void 0,function(){var n;return s(this,function(i){if(n=this.getModule("GDPRCompliance"))return[2,n.requestDataPortability(t)];throw new Error("GDPR Compliance module not found")})})},n.prototype.getPrivacySettings=function(){var t=this.getModule("GDPRCompliance");return t?t.getPrivacySettings():null},n.prototype.setPrivacySettings=function(t){var n=this.getModule("GDPRCompliance");n?n.setPrivacySettings(t):this.config.debug},n.prototype.isGDPRCompliant=function(){var t=this.getModule("GDPRCompliance");return t?t.isCompliant():!this.config.enableGDPR},n.prototype.exportUserData=function(t){return r(this,void 0,void 0,function(){var n;return s(this,function(i){if(n=this.getModule("GDPRCompliance"))return[2,n.exportUserData(t||this.session.visitorId)];throw new Error("GDPR Compliance module not found")})})},n.prototype.flush=function(){return r(this,void 0,void 0,function(){var t,n,i;return s(this,function(e){switch(e.label){case 0:if(0===this.Tn.length)return[2];t=o([],this.Tn,!0),this.Tn=[],e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.Cn(t)];case 2:return e.sent(),this.emit("events:sent",t),[3,4];case 3:return n=e.sent(),(i=this.Tn).unshift.apply(i,t),this.emit("events:failed",n),this.config.debug,[3,4];case 4:return[2]}})})},n.prototype.destroy=function(){this.yt||(this.Dn&&clearInterval(this.Dn),this.flush().catch(function(){}),this.jn.destroy(),this.Sn.forEach(function(t){t.destroy&&t.destroy()}),this.Sn.clear(),this.removeAllListeners(),this.yt=!0,this.isInitialized=!1)},n.prototype.In=function(){return{sessionId:"",visitorId:"",startTime:0,lastActivity:0,pageViews:0,platform:"",userAgent:"",landingPage:""}},n.prototype._n=function(t){this.Tn.push(t),this.Tn.length>=this.config.batchSize&&this.flush().catch(function(){})},n.prototype.Mn=function(){var t=this;this.Dn&&clearInterval(this.Dn),this.Dn=window.setInterval(function(){t.Tn.length>0&&t.flush().catch(function(){})},this.config.flushInterval)},n.prototype.Cn=function(t){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.config.debug,[4,new Promise(function(t){return setTimeout(t,100)})];case 1:return t.sent(),[2]}})})},n}(C),R=function(t){function n(n,i){var r,s,o,a,c,u;void 0===n&&(n={});var h=t.call(this)||this;return h.name="GDPRCompliance",h.An=null,h.Pn=null,h.On=!1,h.Rn={bannerTitle:"We value your privacy",bannerDescription:"We use cookies and similar technologies to enhance your experience, analyze usage, and assist with marketing. You can manage your preferences at any time.",acceptAll:"Accept All",rejectAll:"Reject All",customize:"Customize",savePreferences:"Save Preferences",necessary:"Necessary",analytics:"Analytics",marketing:"Marketing",privacyPolicy:"Privacy Policy",cookiePolicy:"Cookie Policy"},h.M=e({enabled:!0,consentBanner:e({enabled:!0,position:"bottom",theme:"light",texts:h.Rn,showOnEveryPage:!1,respectDoNotTrack:!0},n.consentBanner),cookieCategories:h.zn(),dataRetention:e({defaultDays:730,automaticDeletion:!0},n.dataRetention),userRights:e({enableDataAccess:!0,enableDataDeletion:!0,enableDataPortability:!0,enableOptOut:!0},n.userRights),privacyByDesign:e({dataMinimization:!0,purposeLimitation:!0,storageMinimization:!0,autoAnonymization:!0},n.privacyByDesign),legalBasis:e({type:"consent",description:"User consent for data processing"},n.legalBasis)},n),h.Nn=h.M.cookieCategories||h.zn(),h.En={dataMinimization:(null===(r=h.M.privacyByDesign)||void 0===r?void 0:r.dataMinimization)||!0,anonymizeIPs:!0,respectDoNotTrack:(null===(s=h.M.consentBanner)||void 0===s?void 0:s.respectDoNotTrack)||!0,cookielessTracking:!1,storageMinimization:(null===(o=h.M.privacyByDesign)||void 0===o?void 0:o.storageMinimization)||!0,automaticDeletion:(null===(a=h.M.dataRetention)||void 0===a?void 0:a.automaticDeletion)||!0,purposeLimitation:(null===(c=h.M.privacyByDesign)||void 0===c?void 0:c.purposeLimitation)||!0,dataRetentionDays:(null===(u=h.M.dataRetention)||void 0===u?void 0:u.defaultDays)||730,consentRequired:!0},h.Vt=i||(d()?localStorage:{getItem:function(){return null},setItem:function(){},removeItem:function(){},clear:function(){}}),h}return i(n,t),n.prototype.init=function(){if(this.M.enabled&&!this.On){if(this.Gn(),this.En.respectDoNotTrack&&this.Wn())return this.qn(),this.On=!0,void this.emit("gdpr:initialized",this.M);this.Vn()&&this.showConsentBanner(),this.On=!0,this.emit("gdpr:initialized",this.M)}},n.prototype.showConsentBanner=function(){var t;d()&&(null===(t=this.M.consentBanner)||void 0===t?void 0:t.enabled)?(this.Jn(),this.emit("banner:shown")):this.emit("banner:shown")},n.prototype.hideConsentBanner=function(){this.Pn&&(this.Pn.remove(),this.Pn=null,this.emit("banner:hidden"))},n.prototype.getConsent=function(){return this.An},n.prototype.setConsent=function(t){var n=this,i=e({id:h(),hasConsent:!0,timestamp:f(),version:"1.0",method:"banner",categories:{},legalBasis:{},purposes:{analytics:!1,marketing:!1,functional:!0,advertising:!1,personalization:!1}},t);Object.keys(i.categories).forEach(function(t){if(n.Nn.find(function(n){return n.id===t})&&i.categories[t])switch(t){case"analytics":i.purposes.analytics=!0;break;case"marketing":i.purposes.marketing=!0;break;case"advertising":i.purposes.advertising=!0;break;case"personalization":i.purposes.personalization=!0}}),this.An=i,this.Un(),this.hideConsentBanner(),this.emit("consent:updated",i)},n.prototype.withdrawConsent=function(t){var n=this;if(this.An){if(t)switch(this.An.categories[t]=!1,t){case"analytics":this.An.purposes.analytics=!1;break;case"marketing":this.An.purposes.marketing=!1;break;case"advertising":this.An.purposes.advertising=!1;break;case"personalization":this.An.purposes.personalization=!1}else this.An.hasConsent=!1,this.An.withdrawalDate=f(),Object.keys(this.An.categories).forEach(function(t){n.An.categories[t]=!1}),this.An.purposes={analytics:!1,marketing:!1,functional:!0,advertising:!1,personalization:!1};this.Un(),this.emit("consent:withdrawn",{category:t,consent:this.An})}},n.prototype.renewConsent=function(){this.An&&(this.An.renewalRequired=!0,this.Un()),this.showConsentBanner(),this.emit("consent:renewal_required")},n.prototype.getCookieCategories=function(){return this.Nn},n.prototype.setCookieCategory=function(t,n){var i=this.Nn.find(function(n){return n.id===t});i&&!i.required&&(i.enabled=n,this.An&&(this.An.categories[t]=n,this.Un()),this.emit("cookie:category_changed",{categoryId:t,enabled:n}))},n.prototype.clearCookies=function(t){d()&&((t?this.Nn.filter(function(n){return n.id===t}):this.Nn.filter(function(t){return!t.enabled&&!t.required})).forEach(function(t){t.cookies.forEach(function(t){document.cookie="".concat(t.name,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=").concat(t.domain||window.location.hostname)})}),this.emit("cookies:cleared",{category:t}))},n.prototype.requestDataAccess=function(t){return r(this,void 0,void 0,function(){var n,i;return s(this,function(r){if(!(null===(i=this.M.userRights)||void 0===i?void 0:i.enableDataAccess))throw new Error("Data access requests are not enabled");return n=e(e({id:h(),type:"access",timestamp:f(),visitorId:this.Fn()},t&&{email:t}),{status:"pending",expiresAt:f()+2592e6}),this.emit("data:access_requested",n),[2,n]})})},n.prototype.requestDataDeletion=function(t){return r(this,void 0,void 0,function(){var n,i;return s(this,function(r){if(!(null===(i=this.M.userRights)||void 0===i?void 0:i.enableDataDeletion))throw new Error("Data deletion requests are not enabled");return n=e(e({id:h(),type:"deletion",timestamp:f(),visitorId:this.Fn()},t&&{email:t}),{status:"pending",expiresAt:f()+2592e6}),this.emit("data:deletion_requested",n),[2,n]})})},n.prototype.requestDataPortability=function(t){return r(this,void 0,void 0,function(){var n,i;return s(this,function(r){if(!(null===(i=this.M.userRights)||void 0===i?void 0:i.enableDataPortability))throw new Error("Data portability requests are not enabled");return n=e(e({id:h(),type:"portability",timestamp:f(),visitorId:this.Fn()},t&&{email:t}),{status:"pending",expiresAt:f()+2592e6}),this.emit("data:portability_requested",n),[2,n]})})},n.prototype.getPrivacySettings=function(){return e({},this.En)},n.prototype.setPrivacySettings=function(t){this.En=e(e({},this.En),t),this.emit("privacy:settings_updated",this.En)},n.prototype.anonymizeData=function(t){if(!this.En.dataMinimization)return t;var n=e({},t);return this.En.anonymizeIPs&&n.ip&&(n.ip=this.Bn(n.ip)),["email","phone","name","address","ssn"].forEach(function(t){n[t]&&delete n[t]}),n},n.prototype.isCompliant=function(){return!this.M.enabled||!(this.En.consentRequired&&!this.Ln())&&!!this.Hn()},n.prototype.getComplianceReport=function(){var t=[],n=[],i="missing";this.An?this.An.withdrawalDate?i="withdrawn":this.Qn()?(i="expired",t.push("Consent has expired and needs renewal")):i="valid":t.push("No consent record found");var e=this.Hn();e||(t.push("Data retention period exceeded"),n.push("Implement automatic data deletion"));var r=this.Xn();return r||(t.push("Non-essential cookies active without consent"),n.push("Review cookie categorization and consent status")),{timestamp:f(),consentStatus:i,dataRetentionCompliance:e,cookieCompliance:r,privacySettingsCompliance:!0,issues:t,recommendations:n}},n.prototype.exportUserData=function(t){return r(this,void 0,void 0,function(){return s(this,function(n){return[2,{visitorId:t,exportDate:f(),sessions:[],events:[],pageViews:[],consent:this.An?[this.An]:[],format:"json"}]})})},n.prototype.deleteUserData=function(t){return r(this,void 0,void 0,function(){return s(this,function(n){try{return this.Vt.removeItem("gdpr_consent_".concat(t)),this.Vt.removeItem("visitor_session_".concat(t)),this.An&&(this.An=null),this.emit("data:deleted",{visitorId:t}),[2,!0]}catch(n){return this.emit("data:deletion_failed",{visitorId:t,error:n}),[2,!1]}return[2]})})},n.prototype.destroy=function(){this.hideConsentBanner(),this.On=!1,this.emit("gdpr:destroyed")},n.prototype.zn=function(){return[{id:"necessary",name:"Necessary",description:"These cookies are essential for the website to function properly.",required:!0,enabled:!0,purpose:"Essential website functionality",legalBasis:{type:"legitimate_interests",description:"Necessary for website operation",legitimateInterests:"Providing requested services"},retentionPeriod:365,cookies:[{name:"session_id",purpose:"Session management",provider:"First party",expiry:"Session",type:"essential"}]},{id:"analytics",name:"Analytics",description:"These cookies help us understand how visitors interact with our website.",required:!1,enabled:!1,purpose:"Website analytics and improvement",legalBasis:{type:"consent",description:"User consent for analytics"},retentionPeriod:730,cookies:[{name:"tracking_id",purpose:"Visitor tracking",provider:"First party",expiry:"2 years",type:"analytics"}]},{id:"marketing",name:"Marketing",description:"These cookies are used to show relevant advertising and marketing content.",required:!1,enabled:!1,purpose:"Personalized advertising",legalBasis:{type:"consent",description:"User consent for marketing"},retentionPeriod:365,cookies:[{name:"marketing_id",purpose:"Marketing campaigns",provider:"Third party",expiry:"1 year",type:"marketing"}]}]},n.prototype.Gn=function(){try{var t=this.Vt.getItem("gdpr_consent");t&&(this.An=JSON.parse(t))}catch(t){}},n.prototype.Un=function(){this.An&&this.Vt.setItem("gdpr_consent",JSON.stringify(this.An))},n.prototype.Vn=function(){var t,n;return!(!(null===(t=this.M.consentBanner)||void 0===t?void 0:t.enabled)||this.Ln()&&!(null===(n=this.An)||void 0===n?void 0:n.renewalRequired)||this.Wn()&&this.En.respectDoNotTrack)},n.prototype.Ln=function(){return null!==this.An&&this.An.hasConsent&&!this.An.withdrawalDate&&!this.Qn()},n.prototype.Qn=function(){if(!this.An)return!0;var t=this.An.timestamp+31536e6;return f()>t},n.prototype.Wn=function(){return!!d()&&("1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack)},n.prototype.qn=function(){this.setConsent({hasConsent:!1,method:"implied",categories:{},purposes:{analytics:!1,marketing:!1,functional:!0,advertising:!1,personalization:!1}}),this.emit("consent:do_not_track")},n.prototype.Jn=function(){if(d()&&!this.Pn){var t=document.createElement("div");t.className="gdpr-banner",t.innerHTML=this.Yn(),this.$n(t),this.Kn(t),document.body.appendChild(t),this.Pn=t}},n.prototype.Yn=function(){var t,n=(null===(t=this.M.consentBanner)||void 0===t?void 0:t.texts)||this.Rn;return'\n      <div class="gdpr-banner-content">\n        <div class="gdpr-banner-text">\n          <h3>'.concat(n.bannerTitle,"</h3>\n          <p>").concat(n.bannerDescription,'</p>\n        </div>\n        <div class="gdpr-banner-actions">\n          <button type="button" class="gdpr-btn gdpr-btn-customize">').concat(n.customize,'</button>\n          <button type="button" class="gdpr-btn gdpr-btn-reject">').concat(n.rejectAll,'</button>\n          <button type="button" class="gdpr-btn gdpr-btn-accept">').concat(n.acceptAll,"</button>\n        </div>\n      </div>\n    ")},n.prototype.$n=function(t){var n,i,e,r=(null===(n=this.M.consentBanner)||void 0===n?void 0:n.position)||"bottom",s=(null===(i=this.M.consentBanner)||void 0===i?void 0:i.theme)||"light",o={position:"fixed",left:"0",right:"0",zIndex:"10000",backgroundColor:"dark"===s?"#2d3748":"#ffffff",color:"dark"===s?"#ffffff":"#2d3748",padding:"16px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif",fontSize:"14px",lineHeight:"1.4"};"top"===r?o.top="0":o.bottom="0",Object.assign(t.style,o,null===(e=this.M.consentBanner)||void 0===e?void 0:e.customStyles);var a=t.querySelector(".gdpr-banner-content");a&&Object.assign(a.style,{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"1200px",margin:"0 auto",gap:"16px"}),t.querySelectorAll(".gdpr-btn").forEach(function(t){var n=t;Object.assign(n.style,{padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginLeft:"8px"}),n.classList.contains("gdpr-btn-accept")?Object.assign(n.style,{backgroundColor:"#4299e1",color:"#ffffff"}):n.classList.contains("gdpr-btn-reject")?Object.assign(n.style,{backgroundColor:"transparent",color:"dark"===s?"#ffffff":"#4a5568",border:"1px solid currentColor"}):Object.assign(n.style,{backgroundColor:"transparent",color:"dark"===s?"#ffffff":"#4a5568",textDecoration:"underline"})})},n.prototype.Kn=function(t){var n=this,i=t.querySelector(".gdpr-btn-accept"),e=t.querySelector(".gdpr-btn-reject"),r=t.querySelector(".gdpr-btn-customize");i&&i.addEventListener("click",function(){n.setConsent({hasConsent:!0,method:"banner",categories:Object.fromEntries(n.Nn.map(function(t){return[t.id,!t.required||t.enabled]}))})}),e&&e.addEventListener("click",function(){n.setConsent({hasConsent:!1,method:"banner",categories:Object.fromEntries(n.Nn.map(function(t){return[t.id,t.required]}))})}),r&&r.addEventListener("click",function(){n.Zn()})},n.prototype.Zn=function(){this.emit("banner:customize_requested",this.Nn)},n.prototype.Hn=function(){if(!this.An)return!0;var t=this.En.dataRetentionDays;return f()-this.An.timestamp<=24*t*60*60*1e3},n.prototype.Xn=function(){var t=this;return!!this.An&&this.Nn.every(function(n){if(n.required)return!0;var i=t.An.categories[n.id];return void 0!==i?n.enabled===i:!n.enabled})},n.prototype.Bn=function(t){return t.includes(":")?t.split(":").slice(0,4).join(":")+"::":t.split(".").slice(0,3).join(".")+".0"},n.prototype.Fn=function(){return"visitor_"+h()},n}(C),z=null;function N(t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return z||(z=new O),[4,z.init(t)];case 1:return n.sent(),[2,z]}})})}function E(){return z}function G(t,n){z&&z.track(t,n)}function W(t){z&&z.pageView(t)}function q(t,n){z&&z.identify(t,n)}function V(t){z&&z.setConsent(t)}function J(t){var n=new O;return t&&t.apiUrl&&t.projectId&&n.init(t).catch(function(n){t.debug}),n}if(d()){var U=window;U.optimizelyConfig&&N(U.optimizelyConfig),U.Optimizely={init:N,getTracker:E,track:G,pageView:W,identify:q,setConsent:V,createTracker:J,Tracker:O}}var F={init:N,getTracker:E,track:G,pageView:W,identify:q,setConsent:V,createTracker:J,Tracker:O};t.BehavioralTracker=M,t.EventEmitter=C,t.GDPRCompliance=R,t.SessionManager=A,t.Storage=P,t.TechnologyDetector=_,t.Tracker=O,t.WebSocketManager=D,t.addEventListener=function(t,n,i,e){return t.addEventListener(n,i,e),function(){return t.removeEventListener(n,i,e)}},t.anonymizeIP=function(t){return t?t.includes(":")?j(t):T(t):t},t.anonymizeIPv4=T,t.anonymizeIPv6=j,t.areCookiesEnabled=function(){if(!d())return!1;try{document.cookie="test_cookie=1";var t=-1!==document.cookie.indexOf("test_cookie=");return document.cookie="test_cookie=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(t){return!1}},t.calculateRetentionExpiry=I,t.clearAllCookies=function(t){d()&&document.cookie.split(";").forEach(function(n){var i=n.indexOf("="),e=i>-1?n.substr(0,i).trim():n.trim();if(e){document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"),t&&(document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=").concat(t));var r=window.location.hostname;if(r.includes(".")){var s="."+r.split(".").slice(-2).join(".");document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=").concat(s)}}})},t.createTracker=J,t.debounce=function(t,n){var i=null;return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var s=this;i&&clearTimeout(i),i=setTimeout(function(){t.apply(s,e)},n)}},t.deepMerge=S,t.default=F,t.detectBrowser=k,t.detectPlatform=b,t.domReady=x,t.formatGDPRDate=function(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},t.generateId=h,t.generateSessionId=c,t.generateVisitorId=a,t.getCurrentTitle=g,t.getCurrentUrl=p,t.getDoNotTrackStatus=function(){return!!d()&&("1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack)},t.getLanguage=function(){return d()&&(navigator.language||navigator.userLanguage)||"en"},t.getPlatform=function(){return d()?navigator.platform:"server"},t.getReferrer=y,t.getScrollDepth=function(){if(!d())return 0;var t=window.pageYOffset||document.documentElement.scrollTop,n=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),i=window.innerHeight||document.documentElement.clientHeight;return n<=i?100:Math.round((t+i)/n*100)},t.getTimezoneOffset=function(){return d()?(new Date).getTimezoneOffset():0},t.getTracker=E,t.getUserAgent=w,t.hashSensitiveData=function(t){if(!t)return t;for(var n=0,i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n&=n;return Math.abs(n).toString(36)},t.identify=q,t.init=N,t.isBrowser=d,t.isConsentRequired=function(){if(!d())return!0;var t=Intl.DateTimeFormat().resolvedOptions().timeZone;return["Europe/","Atlantic/Azores","Atlantic/Madeira","Atlantic/Canary"].some(function(n){return t.startsWith(n)})},t.isDataExpired=function(t,n){var i=I(t,n);return f()>i},t.isElementVisible=function(t){if(!d())return!1;var n=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,e=window.innerWidth||document.documentElement.clientWidth;return n.top>=0&&n.left>=0&&n.bottom<=i&&n.right<=e},t.isProduction=function(){return"production"===process.env.NODE_ENV},t.isValidEmail=function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)},t.now=f,t.pageView=W,t.removePII=function(t){if(!t||"object"!=typeof t)return t;var n=e({},t);return["email","phone","name","firstName","lastName","fullName","address","street","city","zipCode","postalCode","ssn","socialSecurityNumber","creditCard","bankAccount","passport","driverLicense","taxId"].forEach(function(t){n[t]&&delete n[t]}),n},t.safeJsonParse=v,t.safeJsonStringify=m,t.setConsent=V,t.shouldAnonymizeIP=function(t,n){return n.anonymizeIPs&&Boolean(t)&&"127.0.0.1"!==t&&"::1"!==t},t.shouldMinimizeData=function(t){return t.dataMinimization},t.simpleHash=function(t){var n=0;if(0===t.length)return n;for(var i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n&=n;return Math.abs(n)},t.throttle=l,t.track=G,Object.defineProperty(t,"ti",{value:!0})});
//# sourceMappingURL=tracker.min.js.map
